<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manufarm - Metallkonstruktsioonid</title>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary:#1a1a1a; --accent:#ff6b35; --white:#fff; --light:#f5f5f5; --gray:#666; }
        body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; color:var(--primary); overflow-x:hidden; line-height:1.6; }
        html { scroll-behavior:smooth; }

        /* HEADER */
        header { position:fixed; top:0; width:100%; padding:25px 50px; display:flex; justify-content:space-between; align-items:center;
            z-index:1000; background:rgba(255,255,255,0.95); backdrop-filter:blur(10px); transition:.3s; }
        .logo { font-size:28px; font-weight:800; }
        .contact-btn { background:var(--accent); color:white; padding:12px 30px; border-radius:50px; text-decoration:none;
            font-weight:600; font-size:14px; transition:.3s; border:none; cursor:pointer; }
        .contact-btn:hover { transform:scale(1.05); box-shadow:0 5px 20px rgba(255,107,53,.4); }

        /* HERO */
        .hero { height:100vh; display:flex; align-items:center; justify-content:center; background:var(--primary); color:white; text-align:center; position:relative; overflow:hidden; }
        .hero::before { content:''; position:absolute; width:150%; height:150%; background:radial-gradient(circle,rgba(255,107,53,.1) 0%, transparent 70%); animation:pulse 15s infinite; }
        @keyframes pulse { 0%,100%{transform:scale(1);opacity:.5;} 50%{transform:scale(1.2);opacity:.8;} }

        /* GENERAL SECTIONS */
        .features, .stats, .team, .equipment, .contact { padding:120px 50px; }
        .section-title { font-size:50px; font-weight:900; text-align:center; margin-bottom:60px; }

        /* CONTACT */
        .contact { background:var(--primary); color:white; }
        .contact-wrapper { max-width:1200px; margin:0 auto; display:grid; grid-template-columns:1fr 1.5fr; gap:80px; }
        .contact-form { background:rgba(255,255,255,0.05); padding:50px; border-radius:20px; backdrop-filter:blur(10px); }
        .form-row { display:grid; grid-template-columns:1fr 1fr; gap:25px; }
        .form-group { display:flex; flex-direction:column; margin-bottom:20px; }
        .form-group.full-width { grid-column:1 / -1; }
        .form-group label { margin-bottom:8px; }
        .form-group input, .form-group select, .form-group textarea {
            padding:15px; border:2px solid rgba(255,255,255,.1); border-radius:10px; background:rgba(255,255,255,.05);
            color:white; font-size:16px;
        }
        .submit-btn { width:100%; padding:18px; background:var(--accent); border:none; border-radius:50px; color:white;
            font-size:18px; font-weight:700; cursor:pointer; transition:.3s; }
        .submit-btn:hover { box-shadow:0 10px 30px rgba(255,107,53,.4); }

        footer { background:var(--primary); color:white; padding:40px; text-align:center; opacity:.7; }
    </style>
</head>

<body>

<header>
    <div class="logo" data-editable="logo">MANUFARM</div>
    <a href="#contact" class="contact-btn" data-editable="header-btn">Võta ühendust</a>
</header>

<section class="hero">
    <div class="hero-content">
        <h1>
            <span data-editable="hero-title">Metallkonstruktsioonid</span>
            <span class="hero-highlight" data-editable="hero-title-accent" style="color:var(--accent)">uuel tasemel</span>
        </h1>
        <p data-editable="hero-subtitle">
            Projekteerimine, tootmine ja paigaldamine igat liiki metallkonstruktsioonidele kvaliteedigarantiiga
        </p>
        <a href="#contact" class="contact-btn" data-editable="hero-btn">Küsi pakkumist</a>
    </div>
</section>

<!-- SKIPPED FEATURES / TEAM / EQUIPMENT (оставляю как у тебя, НИЧЕГО НЕ ЛОМАЯ) -->

<section id="contact" class="contact">
    <h2 class="section-title" data-editable="contact-title">Võtke meiega ühendust</h2>

    <div class="contact-wrapper">

        <div class="contact-info">
            <p data-editable="contact-support">
                Kiired päringud • Sergei +372 524 5389 • Andrei +372 554 1895
            </p>
        </div>

        <!-- ⭐ ОБНОВЛЁННАЯ ФОРМА С FORMSPREE ⭐ -->
        <form class="contact-form" id="contactForm"
              action="https://formspree.io/f/meoyrrdl"
              method="POST"
              enctype="multipart/form-data">

            <div class="form-row">
                <div class="form-group">
                    <label for="name">Teie nimi *</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="company">Ettevõte</label>
                    <input type="text" id="company" name="company">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="phone">Telefon *</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>
            </div>

            <div class="form-group full-width">
                <label for="service">Huvipakkuv teenus</label>
                <select id="service" name="service">
                    <option value="">Valige teenus</option>
                    <option value="Hoonete raamistikud">Hoonete raamistikud</option>
                    <option value="Angarid ja laod">Angarid ja laod</option>
                    <option value="Individuaalne projekt">Individuaalne projekt</option>
                    <option value="Konsultatsioon">Konsultatsioon</option>
                    <option value="Muud">Muud</option>
                </select>
            </div>

            <div class="form-group full-width">
                <label for="message">Kirjeldage oma projekti *</label>
                <textarea id="message" name="message" rows="5" required></textarea>
            </div>

            <!-- ⭐ ДОБАВЛЕНО: загрузка файлов ⭐ -->
            <div class="form-group full-width">
                <label for="files">Lisa failid (valikuline)</label>
                <input type="file" id="files" name="files"
                       multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.zip"
                       style="padding:10px; border:2px dashed rgba(255,255,255,.3); background:rgba(255,255,255,0.05);">
                <small style="opacity:.7; font-size:12px; display:block; margin-top:4px;">
                    Võite lisada kuni 5 faili (PDF, Word, pildid, ZIP)
                </small>
            </div>

            <button type="submit" class="submit-btn">Saada päring</button>
        </form>

    </div>
</section>

<footer>
    <p data-editable="footer-text">&copy; 2024 Manufarm. Kõik õigused kaitstud.</p>
</footer>

<script>
/* Загрузка контента из админки */
function loadContent() {
    const saved = localStorage.getItem('manufarmContent');
    if (!saved) return;
    const content = JSON.parse(saved);
    Object.keys(content).forEach(key => {
        const el = document.querySelector(`[data-editable="${key}"]`);
        if (el) el.textContent = content[key];
    });
}

/* Плавный скролл */
document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', e => {
        e.preventDefault();
        document.querySelector(a.getAttribute('href')).scrollIntoView({behavior:'smooth'});
    });
});

/* Хедер */
window.addEventListener('scroll', () => {
    const header = document.querySelector('header');
    header.style.padding = window.pageYOffset > 100 ? '20px 50px' : '25px 50px';
});

/* ⭐ Отправка через Formspree ⭐ */
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const btn = this.querySelector('.submit-btn');
    const old = btn.textContent;
    btn.textContent = 'Saatmine...';
    btn.disabled = true;

    try {
        const formData = new FormData(this);
        const response = await fetch(this.action, {
            method: "POST",
            body: formData,
            headers: { "Accept": "application/json" }
        });

        if (response.ok) {
            alert("✅ Täname! Teie sõnum on saadetud.");
            this.reset();
        } else {
            alert("❌ Midagi läks valesti. Palun proovige uuesti.");
        }

    } catch(err) {
        alert("❌ Serveri viga.");
    }

    btn.textContent = old;
    btn.disabled = false;
});

loadContent();
</script>

</body>
</html>
